# StatArb Strategy (Pairs Trading)

## Overview
This strategy builds a market‑neutral pairs‑trading portfolio using the expanded large‑cap universe. It identifies highly correlated pairs, fits a rolling linear relationship on log prices, and trades mean reversion of the spread.

## Data
- Source: Yahoo Finance via `yfinance` (auto‑adjusted OHLCV)
- Universe: Expanded large‑cap list in `src/config.py`
- Frequency: Daily

## Pair Selection
1. Compute daily returns for all tickers.
2. Compute the correlation matrix on the last `corr_window` days (default 252).
3. Select the top `max_pairs` pairs by absolute correlation.

## Spread & Signal
For each pair (A, B):
- Fit **rolling OLS** on log prices over the last `lookback` days:
  - `log(P_A) = a + beta * log(P_B)`
- Spread = `log(P_A) − (a + beta * log(P_B))`
- Compute z‑score of spread over the lookback window.

**Rules (defaults):**
- **Entry:** z > +1.5 → short spread; z < −1.5 → long spread
- **Exit:** |z| < 0.25 → flat

## Position Construction
- For an active pair, weights are market‑neutral using beta:
  - If long spread: long A, short beta * B
  - If short spread: short A, long beta * B
- Pair weights are normalized by total absolute exposure.
- Portfolio weights are the average across active pairs.

## Costs
- Transaction costs applied via turnover (bps):
  - `total_cost_bps = tc_bps + slippage_bps`

## Outputs
Generated by `scripts/run_statarb.py`:
- `outputs/statarb_metrics.csv`
- `outputs/statarb_returns.csv`
- `outputs/statarb_weights.csv`
- `outputs/statarb_equity_curve.png`

## How to Run
```bash
python scripts/run_statarb.py
```

## Notes
- This is a baseline stat‑arb implementation; no regime filters or cointegration tests are included.
- Parameters are configurable via `StatArbParams` in `src/statarb.py`.
